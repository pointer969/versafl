/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/f/library","sap/ui/base/ManagedObject","sap/m/Table","sap/f/cards/BaseContent","sap/m/Column","sap/m/ColumnListItem","sap/m/Text","sap/m/Link","sap/m/ProgressIndicator","sap/m/ObjectIdentifier","sap/m/ObjectStatus","sap/f/Avatar","sap/f/cards/ActionEnablement","sap/ui/core/VerticalAlign","sap/m/ListSeparators","sap/m/ListType","sap/f/cards/BindingResolver"],function(l,M,R,B,C,a,T,L,P,O,b,A,c,V,d,e,f){"use strict";var g=l.AvatarSize;var h=B.extend("sap.f.cards.TableContent",{renderer:{}});h.prototype.exit=function(){B.prototype.exit.apply(this,arguments);if(this._oItemTemplate){this._oItemTemplate.destroy();this._oItemTemplate=null;}};h.prototype._getTable=function(){if(this._bIsBeingDestroyed){return null;}var t=this.getAggregation("_content");if(!t){t=new R({id:this.getId()+"-Table",showSeparators:d.None});this.setAggregation("_content",t);}return t;};h.prototype.setConfiguration=function(o){B.prototype.setConfiguration.apply(this,arguments);if(!o){return this;}if(o.rows&&o.columns){this._setStaticColumns(o.rows,o.columns);return this;}if(o.row&&o.row.columns){this._setColumns(o.row);}return this;};h.prototype._setColumns=function(r){var i=[],t=this._getTable(),j=r.columns;j.forEach(function(k){this._getTable().addColumn(new C({header:new T({text:k.title}),width:k.width}));i.push(this._createCell(k));}.bind(this));this._oItemTemplate=new a({cells:i,vAlign:V.Middle});this._attachActions(r,this._oItemTemplate);var o={template:this._oItemTemplate};this._bindAggregation("items",t,o);};h.prototype._setStaticColumns=function(r,i){var t=this._getTable();i.forEach(function(o){t.addColumn(new C({header:new T({text:o.title}),width:o.width}));});r.forEach(function(o){var I=new a({vAlign:V.Middle});if(o.cells&&Array.isArray(o.cells)){for(var j=0;j<o.cells.length;j++){I.addCell(this._createCell(o.cells[j]));}}if(o.actions&&Array.isArray(o.actions)){var k=o.actions[0];if(k.type===e.Navigation){I.setType(e.Navigation);}if(k.url){I.attachPress(function(){window.open(k.url,k.target||"_blank");});}}t.addItem(I);}.bind(this));};h.prototype._createCell=function(o){if(o.url){return new L({text:o.value,href:o.url,target:o.target||"_blank"});}if(o.identifier){var i=new O({title:o.value});if(o.identifier.url){var j=M.bindingParser(o.identifier.url);if(j){j.formatter=function(v){if(typeof v==="string"){return true;}return false;};i.bindProperty("titleActive",j);}else{i.setTitleActive(!!o.identifier.url);}i.attachTitlePress(function(E){var s=E.getSource(),k=s.getBindingContext(),m=s.getModel(),p,u,t;if(k){p=k.getPath();}u=f.resolveValue(o.identifier.url,m,p);t=f.resolveValue(o.identifier.target,m,p);if(u){window.open(u,t||"_blank");}});}return i;}if(o.state){return new b({text:o.value,state:o.state});}if(o.value){return new T({text:o.value});}if(o.icon){return new A({src:o.icon.src,displayShape:o.icon.shape,displaySize:g.XS});}if(o.progressIndicator){return new P({percentValue:o.progressIndicator.percent,displayValue:o.progressIndicator.text,state:o.progressIndicator.state});}};c.enrich(h);return h;});
